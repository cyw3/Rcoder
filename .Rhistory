library('lubridate')
library(qutke)
key<-"faca4c8ff4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
init(key)
library(devtools)
install_github('qutke/qutke')
library(devtools)
install.packages(devtools)
install.packages("devtools")
library(devtools)
install_github('qutke/qutke')
library(qutke)
f4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
init(key)
date <- Sys.Date()-1
;
key<-"faca4c8ff4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
key<-"faca4c8ff4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
init(key)
date <- Sys.Date()-1
yieldChart <- data.frame('1'=c('2015-11-11','2015-11-12','2015-11-13'),'2'=c(1,2,3),'3'=c(3,2,1))
yieldChart
industry <- getIndustry(data='industryType',date=date,qtid=c('001979.SZ','002142.SZ'),key=key)
industry
industry <- getIndustry(data='industryType',date=date,qtid=c('002142.SZ'),key=key)
industry
industry <- getIndustry(data='industryType',date=date,qtid=c('001979.SZ'),key=key)
industry
MD <- getMD(data='keyMap',qtid=c('001979.SZ','002142.SZ'),key=key)
MD
industry <- getIndustry(data='industryType',date=date,qtid=c('001979.SZ','002142.SZ'),key=key)
industry
industry <- getIndustry(data='industryType',date=date-1,qtid=c('001979.SZ','002142.SZ'),key=key)
industry
industry <- getIndustry(data='industryType',date=date-4,qtid=c('001979.SZ','002142.SZ'),key=key)
industry
getDailyQuote(data='mktFwdDaily',qtid=c('000001.SZ','000002.SZ'),key=key)
getDailyQuote(data='mktFwdDaily',qtid=c('001979.SZ','002142.SZ'),key=key)
getDailyQuote(data='mktFwdDaily',qtid=c('001979.SZ'),key=key)
industry <- getIndustry(data='industryType',date='2016-01-18',qtid=c('001979.SZ','002142.SZ'),key=key)
industry
industry <- getIndustry(data='industryType',date='2016-01-08',qtid=c('001979.SZ','002142.SZ'),key=key)
industry
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
library('lubridate')
library(qutke)
key<-"faca4c8ff4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
init(key)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
qtid <- c('001979.SZ','002142.SZ')
#2、设定买入日期是2015-10-01，获取当天收盘价（假定买入价为收盘价）
date <- '2015-10-01'
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
dailyQuote
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate='2015-12-25',key=key)
dailyQuote
getQtStock(data='financialIndex',qtid=qtid,key=key)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate='2015-12-25',key=key)
dailyQuote[1]
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
dailyQuote[1]
dates<-dailyQuote[which(qtid=='001979.SZ')]
dates
stock <-dailyQuote[which(qtid=='001979.SZ')]
stock <-dailyQuote[which(qtid=='001979.SZ'),]
stock
dailyQuote
'001979.SZ'=='001979.SZ'
c('001972.SZ','001979.SZ')=='001979.SZ'
stock <-dailyQuote[which(dailyQuote$qtid=='001979.SZ'),]
stock
stock <-dailyQuote[which(qtid=='001979.SZ'),]
stock
qtid <- c('002230.SZ','002715.SZ')
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
dailyQuote
stock1 <-dailyQuote[which(dailyQuote$qtid=='002230.SZ'),]
stock1
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
stock1
qtid[2]
qtid[1]
dailyQuote$qtid==qtid[2]
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
stock1
stock1[1]
stock1[1,]
stock2 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]
stock2 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
stock1[1,]
getDate(data='tradingDay',startdate=date,enddate=Sys.Date(),key=key)
yieldChart <- data.frame('date'=tradingDay,'2'=c(1,2,3),'3'=c(3,2,1))
tradingDay <- getDate(data='tradingDay',startdate=date,enddate=Sys.Date(),key=key)
yieldChart <- data.frame('date'=tradingDay,'2'=c(1,2,3),'3'=c(3,2,1))
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]$fwdAdjClose
stock2 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]$fwdAdjClose
stock1
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]
stock1
isnull(null)
isNull(null)
is.null()
qtid <- '002230.SZ'
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]
stock1
tradingDay <- getDate(data='tradingDay',startdate=stock1$date[1],enddate=Sys.Date(),key=key)
stock1$date[1]
tradingDay
stock2
i <- 1
length <- length(tradingDay)
while(i<=length){
if(is.null(stock1[i]))
fwdAdjClose1 <- fwdAdjClose1[i-1]
else
fwdAdjClose1 <- stock1[i]$fwdAdjClose
}
i <- 1
length <- length(tradingDay)
length
while(i<=length){
if(is.null(stock1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
else
fwdAdjClose1[i] <- stock1[i]$fwdAdjClose
}
fwdAdjClose1 <- c()
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
else
fwdAdjClose1[i] <- stock1[i]$fwdAdjClose
print(fwdAdjClose1[i])
}
1++
i=i+1
i=i+1
i
i <- 1
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
else
fwdAdjClose1[i] <- stock1[i]$fwdAdjClose
i=i+1
print(fwdAdjClose1[i])
}
is.null(stock1[1])
stock1[1]
stock1[1,]
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
else
fwdAdjClose1[i] <- stock1[i,]$fwdAdjClose
i=i+1
print(fwdAdjClose1[i])
}
is.null(stock1[i,])
stock1[1,]$fwdAdjClose
fwdAdjClose1[1] <- stock1[1,]$fwdAdjClose
fwdAdjClose1[1]
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
else
fwdAdjClose1[i] <- stock1[i,]$fwdAdjClose
i=i+1
print(fwdAdjClose1[i])
}
i <- 1
length <- length(tradingDay)
#fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
print(fwdAdjClose1[i])
}
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
print(fwdAdjClose1[i])
}
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
print(fwdAdjClose1)
}
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,]))
fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1)
print(fwdAdjClose1[length])
print(fwdAdjClose1[length-3])
stock1[i,]$fwdAdjClose
stock1$fwdAdjClose
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
if(is.null(stock1[i,])&&is.na(stock1[i,]))
fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1[length-3])
fwdAdjClose1
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
#if(is.null(stock1[i,])&&is.na(stock1[i,]))
#  fwdAdjClose1 <- c(fwdAdjClose1,fwdAdjClose1[i-1])
#else
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1[length])
fwdAdjClose1
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
if(is.null(fwdAdjClose1[i,])&&is.na(fwdAdjClose1[i,]))
fwdAdjClose1[i,] <- fwdAdjClose1[i-1]
#else
#  fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1[length])
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
if(is.null(fwdAdjClose1[i])&&is.na(fwdAdjClose1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
#else
#  fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1[length])
fwdAdjClose1
is.na(fwdAdjClose1)
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
while(i<=length){
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
if(is.null(fwdAdjClose1[i])||is.na(fwdAdjClose1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
#else
#  fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
i=i+1
}
print(fwdAdjClose1[length])
fwdAdjClose1
fwdAdjClose1 <- (fwdAdjClose1-fwdAdjClose1[1])/fwdAdjClose1[1]*100
fwdAdjClose1
qtid <- c('002230.SZ','002715.SZ')
#qtid <- '002230.SZ'
#2、设定买入日期是2015-10-01，获取当天收盘价（假定买入价为收盘价）.均选为收盘价
date <- '2015-10-01'
#股票日间行情(前复权)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
#当日收盘价(前复权)
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]
stock2 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
#x轴，作为时间轴。取买入日期至今。
tradingDay <- getDate(data='tradingDay',startdate=stock1$date[1],enddate=Sys.Date(),key=key)
#归一化
#dat1 <- as.character(tradingDay[1])
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
fwdAdjClose2 <- c()
while(i<=length){
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
if(is.null(fwdAdjClose1[i])||is.na(fwdAdjClose1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
fwdAdjClose2 <- c(fwdAdjClose2,stock2[i,]$fwdAdjClose)
if(is.null(fwdAdjClose2[i])||is.na(fwdAdjClose2[i]))
fwdAdjClose2[i] <- fwdAdjClose2[i-1]
i=i+1
}
print(fwdAdjClose1[length])
#计算
fwdAdjClose1 <- (fwdAdjClose1-fwdAdjClose1[1])/fwdAdjClose1[1]*100
fwdAdjClose2 <- (fwdAdjClose2-fwdAdjClose2[1])/fwdAdjClose2[1]*100
fwdAdjClose2
yieldChart <- data.frame('date'=tradingDay,'2'=fwdAdjClose1,'3'=fwdAdjClose2)
yieldChart
postData(yieldChart,name='yieldChart',key=key)
qtid <- c('002230.SZ','002715.SZ')
date <- '2015-10-01'
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
library('lubridate')
library(qutke)
key<-"faca4c8ff4dc1502d87944ea9cfd74f19918f0aef37fde6746b61d4d339bfcf3"
init(key)
init(key)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
key
init(key)
library('lubridate')
library(qutke)
init(key)
library(devtools)
install_github('qutke/qutke')
library(qutke)
init(key)
data1<- data.frame(x1=runif(10),x2= runif(10),x3= runif(10))
row<- c(1, 1, 1)
data2<- rbind(data1[1:5,], row, data1[6:nrow(data1), ])
data2
data1
data2
data1[1:5,]
qtid <- c('002230.SZ','002715.SZ')
#qtid <- '002230.SZ'
#股票基本信息
md <- getMD(data='keyMap',qtid=qtid,key=key)
#2、设定买入日期是2015-10-01，获取当天收盘价（假定买入价为收盘价）.均选为收盘价
date <- '2015-10-01'
#股票日间行情(前复权)
dailyQuote <- getDailyQuote(data='mktFwdDaily',qtid=qtid,startdate=date,enddate=Sys.Date(),key=key)
#当日收盘价(前复权)
stock1 <-dailyQuote[which(dailyQuote$qtid==qtid[1]),]
stock2 <-dailyQuote[which(dailyQuote$qtid==qtid[2]),]
#x轴，作为时间轴。取买入日期至今。
tradingDay <- getDate(data='tradingDay',startdate=stock1$date[1],enddate=Sys.Date(),key=key)
#归一化
#dat1 <- as.character(tradingDay[1])
i <- 1
length <- length(tradingDay)
fwdAdjClose1 <- c()
fwdAdjClose2 <- c()
while(i<=length){
fwdAdjClose1 <- c(fwdAdjClose1,stock1[i,]$fwdAdjClose)
if(is.null(fwdAdjClose1[i])||is.na(fwdAdjClose1[i]))
fwdAdjClose1[i] <- fwdAdjClose1[i-1]
fwdAdjClose2 <- c(fwdAdjClose2,stock2[i,]$fwdAdjClose)
if(is.null(fwdAdjClose2[i])||is.na(fwdAdjClose2[i]))
fwdAdjClose2[i] <- fwdAdjClose2[i-1]
i=i+1
}
print(fwdAdjClose1[length])
#计算
fwdAdjClose1 <- (fwdAdjClose1-fwdAdjClose1[1])/fwdAdjClose1[1]*100
fwdAdjClose2 <- (fwdAdjClose2-fwdAdjClose2[1])/fwdAdjClose2[1]*100
#形成dataframe
yieldChart <- data.frame('date'=tradingDay,'2'=fwdAdjClose1,'3'=fwdAdjClose2)
names(yieldChart)<-c('日期',md[1,]$ChiAbbr,md[2,]$ChiAbbr)
md <- getMD(data='keyMap',qtid=qtid,key=key)
